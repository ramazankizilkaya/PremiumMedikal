function AdetGuncelle(hash,adet,eskiAdet){Urun={},Urun.hash=hash,Urun.adet=adet,jQuery.ajax({url:ccurl+"/ajax.php?p="+ModulName+"&a=AdetGuncelle",type:"post",data:Urun,success:function(d){var data=jQuery.parseJSON(d);data.hasOwnProperty("error")?(MesajGoster(data.error),void 0!==eskiAdet&&jQuery('.SepetUrunSatir[data-hash-id="'+hash+'"] .SepetAdet>input').val(eskiAdet)):SepetAlanlariGuncelle(data.result)}})}function SepetAlanlariGuncelle(d){var sayfaSepetHediye,guncelSepetHediye;if(jQuery(".SepetHediyeSatir").length!=(null==d.Hediyeler?0:d.Hediyeler.length))return location.href=ccurl+"/sepet",!1;null!=d.Hediyeler&&jQuery(".SepetHediyeSatir").each(function(index){if(jQuery(this).find("img").attr("data-image")!=d.Hediyeler[index].Foto)return location.href=ccurl+"/sepet",!1}),jQuery.each(d.UrunList,function(urunHashID,urun){jQuery('.SepetUrunSatir[data-hash-id="'+urunHashID+'"]').each(function(){if(void 0!==urun.KampanyaFiyati){if(!jQuery(this).find(".SepetKampanyaFiyati").length)return location.href=ccurl+"/sepet",!1;jQuery(this).find(".SepetKampanyaFiyati").html(urun.KampanyaFiyati+" "+d.ParaBirimi)}else if(jQuery(this).find(".SepetKampanyaFiyati").length)return location.href=ccurl+"/sepet",!1;urun.Fiyat!=urun.SonFiyat?(jQuery(this).find(".SepetSatisFiyati").html(urun.SonFiyat+" "+d.ParaBirimi),jQuery(this).find(".SepetIndirimsizFiyat").html(urun.Fiyat+" "+d.ParaBirimi)):jQuery(this).find(".SepetSatisFiyati").html(urun.Fiyat+" "+d.ParaBirimi),0!=urun.HavaleFiyati?jQuery(this).find(".SepetHavaleFiyati").html(urun.HavaleFiyati+" "+d.ParaBirimi):jQuery(this).find(".SepetHavaleFiyati").remove();var adet=urun.Adet;jQuery("#Adet"+urunHashID).attr("data-value",adet).val(adet)})});var AraToplamFiyatString=d.AraToplamFiyatString,ToplamFiyatString=d.ToplamFiyatString,Kargo=d.Kargo,KargoFiyati=d.KargoFiyati,KargoFiyatiString=d.KargoFiyatiString,HavaleToplamFiyat=d.HavaleToplamFiyat,HavaleToplamFiyatString=d.HavaleToplamFiyatString,Kampanya=d.Kampanya,KampanyaBaslik=d.KampanyaString,KampanyaToplamFiyat=d.KampanyaToplamFiyat,KampanyaKazancString=d.KampanyaKazancString,KampanyaToplamFiyatString=d.KampanyaToplamFiyatString,view=d.view;jQuery("#SiparisTutariFiyatlar").length?(jQuery("#SiparisTutariFiyatlar").html(""),jQuery.each(view,function(k,v){var pricegroup=jQuery('<div class="cart-steps-box price-group" data-group-id="'+v.id+'"></div>').appendTo("#SiparisTutariFiyatlar");1!==v.id&&jQuery('<div class="title">'+v.title+"</div>").appendTo(pricegroup),jQuery.each(view[k].items,function(key,value){var stil01="",stil02="";"1"==value.id?(stil01="toplam-fiyat ara-toplam",stil02="SepetAraToplamFiyat"):"2"==value.id?(stil01="toplam-indirim kampanya-indirimi",stil02="SepetToplamIndirim"):"3"==value.id?(stil01="toplam-indirim kampanya-ara-toplam",stil02="SepetKampanyaToplamFiyat"):"4"==value.id?(stil01="kargo-tutari",stil02="SepetKargoTutar"):"5"==value.id?(stil01="kapida-odeme-tutari",stil02="SepetKapidaOdemeTutar"):"6"==value.id?(stil01="genel-toplam",stil02="SepetGenelToplamFiyat"):"7"==value.id&&(stil01="havale-ara-toplam",stil02="SepetHavaleToplamFiyat"),jQuery('<div class="SepetFiyat '+stil01+'"><label>'+value.title+'</label><span class="'+stil02+'">'+value.value+"</span></div>").appendTo(pricegroup)})})):(jQuery(".SepetAraToplamFiyat").html(AraToplamFiyatString).closest(".SepetFiyat").removeClass("hide"),jQuery(".SepetToplamFiyat").html(ToplamFiyatString),void 0!==KampanyaToplamFiyat&&"1"==Kampanya&&(jQuery(".SepetToplamIndirim").html(KampanyaKazancString).siblings("label").text(KampanyaBaslik).closest(".SepetFiyat").removeClass("hide"),jQuery(".SepetKampanyaToplamFiyat").html(KampanyaToplamFiyatString).closest(".SepetFiyat").removeClass("hide")),parseInt(KargoFiyati)>0&&"1"==Kargo&&jQuery(".SepetKargoFiyati").html(KargoFiyatiString).closest(".SepetFiyat").removeClass("hide"),parseInt(HavaleToplamFiyat)>0&&jQuery(".SepetHavaleToplamFiyat").html(HavaleToplamFiyatString).closest(".SepetFiyat").removeClass("hide")),"function"==typeof anasayfaSepet&&anasayfaSepet(),"function"==typeof SepetAdetTutar&&SepetAdetTutar()}jQuery(function(){var timer;jQuery(".SepetiBosalt").click(function(){jQuery('<form method="post"><input type="hidden" name="SepetiBosalt" value="true"></form>').appendTo("body").submit()}),jQuery(".adet-arttir").click(function(){var inputel=jQuery(this).closest(".SepetAdet").find(">input"),hash=inputel.attr("data-hash-id"),SepetMinimum=parseInt(inputel.attr("data-sepet-minimum")),SepetArtis=parseInt(inputel.attr("data-sepet-artis")),adet=parseInt(inputel.val()),yeniAdet;SepetMinimum=!jQuery.isNumeric(SepetMinimum)||SepetMinimum<1?1:SepetMinimum,SepetArtis=!jQuery.isNumeric(SepetArtis)||SepetArtis<1?1:SepetArtis,AdetGuncelle(hash,adet+parseInt(SepetArtis),adet)}),jQuery(".adet-azalt").click(function(){var inputel=jQuery(this).closest(".SepetAdet").find(">input"),hash=inputel.attr("data-hash-id"),SepetMinimum=parseInt(inputel.attr("data-sepet-minimum")),SepetArtis=parseInt(inputel.attr("data-sepet-artis")),adet=parseInt(inputel.val());SepetMinimum=!jQuery.isNumeric(SepetMinimum)||SepetMinimum<1?1:SepetMinimum;var yeniAdet=adet-(SepetArtis=!jQuery.isNumeric(SepetArtis)||SepetArtis<1?1:SepetArtis);yeniAdet<=SepetMinimum&&(yeniAdet=SepetMinimum),AdetGuncelle(hash,yeniAdet,adet)}),jQuery(".SepetAdet>input").keyup(function(){var elem=$(this);clearTimeout(timer),timer=setTimeout(function(){var hash=elem.attr("data-hash-id"),adet=parseInt(elem.attr("data-value")),yeniAdet=parseInt(elem.val()),SepetMinimum=parseInt(elem.attr("data-sepet-minimum")),SepetArtis=parseInt(elem.attr("data-sepet-artis"));yeniAdet=!jQuery.isNumeric(yeniAdet)||yeniAdet<1?adet:yeniAdet,SepetMinimum=!jQuery.isNumeric(SepetMinimum)||SepetMinimum<1?1:SepetMinimum,SepetArtis=!jQuery.isNumeric(SepetArtis)||SepetArtis<1?1:SepetArtis,yeniAdet<=0&&(yeniAdet=adet),AdetGuncelle(hash,yeniAdet,adet)},500)}),jQuery(".UrunSil").click(function(){Urun={},Urun.hash=jQuery(this).attr("data-hash-id"),jQuery.ajax({url:ccurl+"/ajax.php?p="+ModulName+"&a=UrunSil",type:"post",data:Urun,success:function(d){var data=jQuery.parseJSON(d);return data.hasOwnProperty("error")?("function"==typeof anasayfaSepet&&anasayfaSepet(),"function"==typeof SepetAdetTutar&&SepetAdetTutar()):data.result.UrunSayisi<1?location.href=ccurl+"/sepet":(jQuery('.SepetUrunSatir[data-hash-id="'+Urun.hash+'"]').each(function(){jQuery(this).slideUp(1e3,function(){jQuery(this).remove()})}),SepetAlanlariGuncelle(data.result)),!0}})}),jQuery("#SiparisTutariFiyatlar").length&&jQuery.ajax({url:ccurl+"/ajax.php?p=Siparis&a=Sepet",type:"post",data:null,async:!1,success:function(d){var data;SepetAlanlariGuncelle(jQuery.parseJSON(d).result)}}),jQuery(".SepetKampanyaFiyati").closest(".SepetUrunSatir").addClass("KampanyaVar"),jQuery(".SepetKampanyaToplamFiyat").closest(".SepetFiyat").siblings(".SepetFiyat").find(".SepetToplamFiyat").addClass("KampanyaVar")});